<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Customizing Grid Keyboard and Mouse Event Behavior</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<a href="http://www.ics.com/index.html">
<img src="ics.jpg" border="0" alt="ICS">
</a>
<center>
<H2>QicsTable Documentation Set</H2>
</center>
</a></head><body>


<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a></div>
<h1><a name="keymouse_behavior">Customizing Grid Keyboard and Mouse Event Behavior</a>
</h1>QicsTable provides built-in keyboard traversal, selection via keyboard and mouse, drag and drop, and other mouse-based behavior. For most users, the built-in behavior will be sufficient, but some users may want to change the default keyboard and mouse behavior of the table. This requires a more detailed understanding of the internals of the <a class="el" href="classQicsTable.html">QicsTable</a> widget.<p>
The toplevel, programmer-visible <a class="el" href="classQicsTable.html">QicsTable</a> widget is largely a layout widget. <a class="el" href="classQicsTable.html">QicsTable</a> does not actually draw anything. Rather, it contains many child widgets, which it lays out in such a way as to create the appropriate table. Some of these widgets are user-provided, such as the title widgets and the corner widgets. Most of the widgets, however, are created automatically by the <a class="el" href="classQicsTable.html">QicsTable</a> as needed. These widgets are called grid widgets. There is at least one grid widget for the "main grid" of the table (but possibly more, if there are frozen rows and/or columns). There is at least one grid widget for the row header (again, possibly more if there are frozen rows and/or columns) and at least one grid widget for the column header.<p>
<h3>Grid Widgets</h3>
<p>
Grid widgets are the "brains" of the QicsTable. They handle cell layout, call the appropriate <a class="el" href="classQicsCellDisplay.html">QicsCellDisplay</a> object to draw each cell, and handle most user interaction.<p>
The base class of the grid hierarchy is <a class="el" href="classQicsGrid.html">QicsGrid</a>. The important thing to notice about <a class="el" href="classQicsGrid.html">QicsGrid</a> is that it is <b>not</b> a widget. <a class="el" href="classQicsGrid.html">QicsGrid</a> is an object that knows how to layout and draw cells in a grid. There is very little customization that can be done in this class.<p>
One subclass of <a class="el" href="classQicsGrid.html">QicsGrid</a> is QicsPrintGrid. This class is used when printing a grid, and is not relevant to the present customization topic.<p>
The base <em>widget</em> class of the grid hierarchy is <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a>. This class is derived from both <a class="el" href="classQicsGrid.html">QicsGrid</a> (thus gaining its layout and drawing capabilities) and QFrame (thus making it a widget that can be displayed on the screen). While this class can be instantiated, it is primarily meant to be a superclass. The drawing behavior of all grids, header or table, is completely implemented in <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a>. The subclasses of <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a> differ only in the way they handle keyboard and mouse events. <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a> also contains the "infrastructure" of most traversal and drag and drop operations. By this, we mean that traversal and drag and drop are available in all subclasses of <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a>, but (with one exception -- discussed below) <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a> does not "bind" these operations to any mouse or keyboard events. That is the job of the subclasses.<p>
The two subclasses of <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a> are <a class="el" href="classQicsTableGrid.html">QicsTableGrid</a> and <a class="el" href="classQicsHeaderGrid.html">QicsHeaderGrid</a>. <a class="el" href="classQicsTableGrid.html">QicsTableGrid</a> is used for the "main grid" of the table. <a class="el" href="classQicsHeaderGrid.html">QicsHeaderGrid</a> is used for the headers of the table. As previously stated, these two classes draw in exactly the same way. The only difference between the two is in user interaction. <a class="el" href="classQicsTableGrid.html">QicsTableGrid</a> supports keyboard traversal, cell editing, selection, and drag and drop. <a class="el" href="classQicsHeaderGrid.html">QicsHeaderGrid</a> supports selection and changing row height or column width.<p>
<h3>Keyboard Events</h3>
<p>
Keyboard events in grid widgets are handled slightly differently than the usual method for QWidgets. Normally, all keyboard behavior is handled in the keyPressEvent() and keyReleaseEvent() methods. If you wish to change this behavior, you must reimplement the appropriate method in your subclass, making sure to replicate any desired existing code from the superclass in your event method.<p>
<a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a> and its subclasses take a different approach. The base grid widget class, <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a>, implements a <a class="el" href="classQicsScreenGrid.html#QicsTableGridb39">keyPressEvent()</a> method that handles many of the common behaviors that are needed in any grid widget. <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a> automatically handles keyboard traversal and cell editing, and dispatches events to individual cell display objects. If an event is not handled by any of the above, it is dispatched to the <a class="el" href="classQicsScreenGrid.html#QicsTableGridb41">handleKeyPressEvent()</a> method. This method is intended to be used by programmers who wish to augment the grid's keyboard handling in subclasses. Simply reimplement this method in your subclass and handle the appropriate key events as you wish.<p>
If you need to modify the grid's traversal behavior, you must reimplement <a class="el" href="">handleKeyboardTraversal()</a>. This method is called by <a class="el" href="classQicsScreenGrid.html#QicsTableGridb39">keyPressEvent()</a> and handles all keyboard traversal actions.<p>
If your keyboard semantics cannot be met by reimplementing <a class="el" href="classQicsScreenGrid.html#QicsTableGridb41">handleKeyPressEvent()</a> or <a class="el" href="">handleKeyboardTraversal()</a>, you will need to completely reimplement <a class="el" href="classQicsHeaderGrid.html#QicsHeaderGridb5">keyPressEvent()</a>. This will require you to duplicate any part of the default <a class="el" href="classQicsHeaderGrid.html#QicsHeaderGridb5">keyPressEvent()</a> keyboard handling that you wish to preserve.<p>
<b>Note</b>: The current implementation of <a class="el" href="classQicsHeaderGrid.html">QicsHeaderGrid</a> has no keyboard behavior defined. Therefore, this class reimplements <a class="el" href="classQicsHeaderGrid.html#QicsHeaderGridb5">keyPressEvent()</a> to be an empty method.<p>
<h3>Mouse Events</h3>
<p>
Similarly to keyboard events, mouse events in grid widgets are handled slightly differently than the usual method for QWidgets. Normally, all mouse behavior is handled in the mousePressEvent(), mouseMoveEvent(), and keyReleaseEvent() methods. If you wish to change this behavior, you must reimplement the appropriate method in your subclass, making sure to replicate any desired existing code from the superclass in your event method.<p>
<a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a> and its subclasses take a different approach. The base grid widget class, <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a>, implements <a class="el" href="classQicsScreenGrid.html#QicsTableGridb35">mousePressEvent()</a>, <a class="el" href="classQicsScreenGrid.html#QicsTableGridb38">mouseMoveEvent()</a>, and <a class="el" href="classQicsScreenGrid.html#QicsTableGridb36">mouseReleaseEvent()</a> methods that handle many of the common behaviors that are needed in any grid widget. <a class="el" href="classQicsScreenGrid.html">QicsScreenGrid</a> automatically handles signal emitting, and dispatches events to individual cell display objects. If an event is not handled by any of the above, it is dispatched to the <a class="el" href="classQicsScreenGrid.html#QicsScreenGridb20">handleMousePressEvent()</a> <a class="el" href="classQicsScreenGrid.html#QicsScreenGridb23">handleMouseMoveEvent()</a> <a class="el" href="classQicsScreenGrid.html#QicsScreenGridb21">handleMouseReleaseEvent()</a> methods. These methods are intended to be used by programmers who wish to augment the grid's mouse event handling in subclasses. Simply reimplement one or more of these methods in your subclass and handle the appropriate mouse events as you wish.<p>
<h3>Using Your New Grid Widget in <a class="el" href="classQicsTable.html">QicsTable</a></h3>
<p>
Once you have created your new grid class, you have to tell <a class="el" href="classQicsTable.html">QicsTable</a> to use it when creating the table. You do this by using an alternate <a class="el" href="classQicsTable.html">QicsTable</a> constructor (<a class="el" href="classQicsTable.html#QicsTablea0">QicsTable::QicsTable</a>). This constructor takes as arguments several <em>foundry</em> <em>methods</em>. Foundry methods are specific procedures that return new instances of a type of object. <a class="el" href="classQicsTable.html">QicsTable</a> uses these foundry methods to create the appropriate kind of grid. (<a class="el" href="classQicsTable.html">QicsTable</a> also uses foundry methods to create data model objects for row and column headers.) The foundry method type to create table grids is <a class="el" href="classQicsTableGrid.html#QicsTableGridw0">QicsTableGrid::Foundry</a>. The foundry method type to create header grids is <a class="el" href="classQicsHeaderGrid.html#QicsHeaderGridw0">QicsHeaderGrid::Foundry</a>.<p>
No other actions are necessary to use your new grid widget in the table. All other processing necessary to integrate the grid into the table environment is performed automatically by <a class="el" href="classQicsTable.html">QicsTable</a>.<p>
For an example showing how to create a custom grid, see <a class="el" href="cg_example.html">Example - Creating a Table with a Custom Grid</a>. <!-- footer -->
<P>
<center>
<font size="1">
All trademarks and copyrights on this page are properties of
their respective owners.<br> The rest is copyright ©1999-2003 Integrated
Computer Solutions, Inc.
</font>
</center>
<!-- end footer -->
